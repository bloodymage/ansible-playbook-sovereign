# {{ ansible_managed }}
{# ============================================================================================== #}
{#                                                                                                #}
{# This is the ssh client system-wide configuration file.  See                                    #}
{# ssh_config(5) for more information.  This file provides defaults for                           #}
{# users, and the values can be changed in per-user configuration files                           #}
{# or on the command line.                                                                        #}
{#                                                                                                #}
{# Configuration data is parsed as follows:                                                       #}
{#  1. command line options                                                                       #}
{#  2. user-specific file                                                                         #}
{#  3. system-wide file                                                                           #}
{# Any configuration value is only changed the first time it is set.                              #}
{# Thus, host-specific definitions should be at the beginning of the                              #}
{# configuration file, and defaults at the end.                                                   #}
{#                                                                                                #}
{# Site-wide defaults for some commonly used options.  For a comprehensive                        #}
{# list of available options, their meanings and defaults, please see the                         #}
{# ssh_config(5) man page.                                                                        #}
{#                                                                                                #}
{# ============================================================================================== #}
{# {% if inventory_hostname in groups['workstations'] and autonomy_smart_card_login %} #}
{# Host *.{{ autonomy_root_domain }} #}
{#   CertificateFile ~/.ssh/%u_{{ autonomy_ownca_privatekey_type | lower }}-cert.pub #}

{# Host * #}
{#   CanonicalizeHostname yes #}
{#   PKCS11Provider /usr/lib/x86_64-linux-gnu/opensc-pkcs11.so #}
{#   IdentityFile ~/.ssh/%u_{{ autonomy_ownca_privatekey_type | lower }}.pub #}

{# {% elif inventory_hostname in groups['workstations'] and autonomy_smart_card_login is falsy %} #}
{# Host *.{{ autonomy_root_domain }} #}
{#   GSSAPIDelegateCredentials yes #}

{# Host * #}
{#   CanonicalizeHostname yes #}
{#   IdentityFile ~/.ssh/id_{{ autonomy_sshca_user_privatekey_type | lower }}.pub #}

{# {% elif inventory_hostname not in groups['workstations'] and autonomy_smart_card_login %} #}
{# Host * #}
{#   CanonicalizeHostname yes #}
{#   IdentityFile ~/.ssh/%u_{{ autonomy_sshca_user_privatekey_type | lower }}.pub #}

{# {% else %} #}
{# Host * #}
{#   CanonicalizeHostname yes #}
{#   IdentityFile ~/.ssh/id_{{ autonomy_sshca_user_privatekey_type | lower }}.pub #}


{# {% endif %} #}
Host *
  CanonicalizeHostname yes



{# {% if openssh_github -%} #}
{#   Host github.com #}

{# {% endif %} #}
{# {% endif %} #}


{# {% endif %} #}



{# {% if openssh_github -%} #}
{#   Host github.com #}
{# {% if autonomy_smart_card_login %} #}
{#   PKCS11Provider /usr/lib/x86_64-linux-gnu/opensc-pkcs11.so #}
{# {% endif %} #}

{# {% endif %} #}

{# {% if openssh_github -%} #}
{#   Host gitlab.com #}
{# {% if autonomy_smart_card_login %} #}
{#   PKCS11Provider /usr/lib/x86_64-linux-gnu/opensc-pkcs11.so #}
{# {% endif %} #}
{#   IdentityFile ~/.ssh/%u_{{ autonomy_ownca_privatekey_type }}.pub #}
{# {% endif %} #}
{# {% endif %} #}
{# {% endif %} #}

{# {% if ssh_hosts is defined -%} #}
{#   {% for host in ssh_hosts -%} #}
{#   Host {{ host.name }} #}
{#   {% for option in host.options -%} #}
{#     {{ option }} #}
{#   {% endfor %} #}
{#   {% endfor %} #}
{# {% endif %} #}


{# {% endif %} #}
